#!/bin/bash

set -e

# If FogLAMP is running on Ubuntu core, it must run in classic mode
if [ `snap list | grep -c 'core'` -gt 0 ]; then
  if [ "$debian_chroot" != 'classic' ]; then
    echo "FogLAMP must run in classic mode. Type \"sudo classic\" first and run this command again."
    exit 1
  fi
fi


# Set the LD_LIBRARY_PATH variable
if [ `uname -m` == "armv7l" ]; then
  LD_LIBRARY_PATH=/usr/local/pgsql/lib:/usr/local/pgsql/lib/arm-linux-gnueabihf
  export LD_LIBRARY_PATH
fi

/usr/local/pgsql/bin/psql "$@"
