#!/bin/bash

set -e

# If FogLAMP is running on Ubuntu core, it must run in classic mode
if [ `snap list 2>&1 | grep -c 'core'` -gt 0 ]; then
  if [ "$debian_chroot" != 'classic' ]; then
    echo "FogLAMP must run in classic mode. Type \"sudo classic\" first and run this command again."
    exit 1
  fi
fi

cd ${HOME}/FogLAMP/src/python
source ./build.sh -a

cd ${HOME}/FogLAMP/benchmarks
python3.5 -m fogbench "$@"

exit 0
